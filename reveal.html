<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reveal Sections on Scroll</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
      }

      .section {
        opacity: 0;
        transform: translateY(50px);
        transition:
          opacity 0.5s ease,
          transform 0.5s ease;
        padding: 100px;
        margin: 50px 0;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .section-hidden {
        opacity: 0;
        transform: translateY(50px); /* Initial state: hidden and translated */
      }

      .section-visible {
        opacity: 1;
        transform: translateY(0); /* Revealed state: visible and in place */
      }
    </style>
  </head>
  <body>
    <!-- Sections to reveal on scroll -->
    <div class="section section-1">
      <h2>Section 1</h2>
      <p>This is the first section. It will be revealed as you scroll down.</p>
    </div>
    <div class="section section-2">
      <h2>Section 2</h2>
      <p>This is the second section. It will be revealed as you scroll down.</p>
    </div>
    <div class="section section-3">
      <h2>Section 3</h2>
      <p>This is the third section. It will be revealed as you scroll down.</p>
    </div>
    <div class="section section-4">
      <h2>Section 4</h2>
      <p>This is the fourth section. It will be revealed as you scroll down.</p>
    </div>
    <div class="section section-5">
      <h2>Section 5</h2>
      <p>This is the fourth section. It will be revealed as you scroll down.</p>
    </div>
    <div class="section section-6">
      <h2>Section 6</h2>
      <p>This is the fourth section. It will be revealed as you scroll down.</p>
    </div>
    <div class="section section-7">
      <h2>Section 7</h2>
      <p>This is the fourth section. It will be revealed as you scroll down.</p>
    </div>

    <script>
      const allSections = document.querySelectorAll(".section");

      const revealSection = function (entries, observer) {
        const [entry] = entries;

        // If the section is not intersecting, return
        if (!entry.isIntersecting) return;

        // Remove hidden class and add visible class
        entry.target.classList.remove("section-hidden");
        entry.target.classList.add("section-visible");

        // Stop observing the current section
        observer.unobserve(entry.target);
      };

      const sectionObserver = new IntersectionObserver(revealSection, {
        root: null,
        threshold: 0.15,
      });

      allSections.forEach(function (section) {
        // Observe each section
        sectionObserver.observe(section);

        // Add hidden class initially
        section.classList.add("section-hidden");

        // Check if the section is already visible on page load and make it visible if it is
        if (section.getBoundingClientRect().top < window.innerHeight) {
          section.classList.remove("section-hidden");
          section.classList.add("section-visible");
          sectionObserver.unobserve(section);
        }
      });
    </script>
  </body>
</html>
